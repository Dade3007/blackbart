<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">

<link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
<dom-module id="blackbart-header">
    <style include="iron-flex"></style>
    <template>
        <style>
        :host {
            display: block;
            margin-bottom: 15px;
            --paper-tabs-selection-bar-color: var(--primary-color);
            --paper-tab-ink: var(--primary-color);
        }
        
        paper-toolbar {
            background-color: white;
            color: black;
        }
        
        paper-tab {
            color: var(--primary-color);
        }
        
        #header {
            height: 65px;
        }
        
        h1 {
            color: var(--primary-color);
            font-family: 'Sacramento';
            position: relative;
            top: 3px;
            margin: auto;
            display: inline-block;
            text-align: center;
        }
        
        paper-tabs {
            max-width: 1000px;
            margin: auto;
        }
        
        .showMenu{
            display: block;
        }

        paper-button {
            color: var(--primary-color);
        }
        
        #fake {
            display: inline-block;
            width: 82.23px;
            margin: 0 0.29em;
        }
        
        .hide {
            display: none !important;
        }
        
        @media only screen and (min-device-width: 480px) {
            #iconMenu {
                display: none;
            }
        }
        
        @media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
            #iconHome {
                display: none;
            }
            #iconMenu {
                display: inline-block !important;
            }
            #headerTabs {
                display: none;
            }
            .left-content {
                text-align: center;
            }
            .left-content iron-icon {
                position: relative;
                top: 10px;
            }
        }
        </style>
        <app-location route="{{route}}" use-hash-as-path></app-location>
        <div id="header" class="layout horizontal">
            <div id="fake"></div>
            <paper-button id="iconMenu" class="hide left-content" on-tap="_toggleMenu">
                <iron-icon icon="icons:menu"></iron-icon>
            </paper-button>
            <paper-button id="iconHome" class="hide left-content" on-tap="_goHome">
                <iron-icon icon="icons:home"></iron-icon>
            </paper-button>
            <paper-button id="iconBack" class="hide left-content" on-tap="_goBack">
                <iron-icon icon="icons:arrow-back"></iron-icon>
            </paper-button>
            <h1 class="flex" main-title on-tap="_goHome">[[name]]</h1>
            <paper-button>
                <iron-icon icon="icons:shopping-cart"></iron-icon>
            </paper-button>
        </div>
        <paper-tabs id="headerTabs" selected="{{selected}}">
            <paper-tab>Chaquetas</paper-tab>
            <paper-tab>Camisas</paper-tab>
            <paper-tab>Faldas</paper-tab>
            <paper-tab>Blusas</paper-tab>
            <paper-tab>Bolsos</paper-tab>
        </paper-tabs>
    </template>
    <script>
    Polymer({
        is: 'blackbart-header',
        listeners: {},
        observers: [
            "_tabChange(selected)",
            "_showMenu(showMenu)",
            "_routeChange(route)"
        ],
        listeners: {
            "toggle-menu-icon": "_toogleMenuIcon"
        },
        properties: {
            name: {
                type: String,
                value: 'CANELA'
            },
            selected: {
                type: Object,
                notify: true
            }
        },
        showMenu: {
            type: Boolean,
            value: true
        },
        _routeChange: function(){
            if (this.route.path == "/product"){
                this.$.iconBack.className = this.$.iconBack.className.replace(/hide/, '');
                this.$.fake.className = this.$.fake.className + ' hide';     
            }else{
                this.$.fake.className = this.$.fake.className.replace(/hide/, '');
                if (this.$.iconBack.className.indexOf('hide') == -1)
                    this.$.iconBack.className = this.$.iconBack.className + ' hide';   
            }
        },
        _showMenu: function(){
            if (!this.showMenu.value)
                this.$.headerTabs.className = this.$.headerTabs.className + ' hide';
        },
        _toggleMenu: function() {
            this.fire("toggle-menu");
        },
        _goBack: function(){
            this.fire("go-to-page", {page: 0, routeName: "home"})
        },
        _tabChange: function(selected) {
            if (selected == undefined) {
                if (this.$.iconHome.className.indexOf('hide') == -1) {
                    this.$.iconHome.className = this.$.iconHome.className + ' hide';
                    this.$.fake.className = this.$.fake.className.replace(/hide/, '');

                }
            } else {
                if (this.$.iconHome.className.indexOf('hide') > -1) {
                    this.$.iconHome.className = this.$.iconHome.className.replace(/hide/, '');
                    this.$.fake.className = this.$.fake.className + ' hide';                    
                }
            }

            this.fire("tab-change", {
                tabSelected: this.selected
            })
        },
        _goHome: function() {
            this.fire("go-home");
        }
    });
    </script>
</dom-module>
